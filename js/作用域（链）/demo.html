<!DOCTYPE HTML>
<html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>无标题文档</title>
  <script>
    window.onload = function () {
      var oUl = document.getElementById('list');
      var aLi = oUl.getElementsByTagName('li');
      var aStrong = oUl.getElementsByTagName('strong');
      var aSpan = oUl.getElementsByTagName('span');
      var aEm = oUl.getElementsByTagName('em');
      var oP = document.getElementById('p1');
      // var arr = [ 0, 0, 0, 0, 0 ];
      var arr = [];

      for (var i = 0; i < aLi.length; i++) {
        arr.push(0);
      }

      //arr[1] = 14.5;
      //alert(arr);

      for (var i = 0; i < aLi.length; i++) {
        // aLi[i].getElementsByTagName('input')[0].index = i;
        // aLi[i].getElementsByTagName('input')[1].index = i;

        fnCount(aLi[i]);
      }

      function fnSum() {
        var num = 0;
        var price = 0;
        var iMax = 0;

        for (var i = 0; i < aStrong.length; i++) {
          num += Number(aStrong[i].innerHTML);
          price += parseFloat(aSpan[i].innerHTML);

          if (aStrong[i].innerHTML > 0) {
            arr[i] = parseFloat(aEm[i].innerHTML);
          } else {
            arr[i] = 0;
          }
        }

        iMax = arr[0];

        for (var i = 1; i < arr.length; i++) {
          if (iMax < arr[i]) {
            iMax = arr[i];
          }
        }

        oP.innerHTML = '商品合计共：' + num + '件，共花费了：' + price + '元<br />其中最贵的商品单价是：' + iMax + '元';
      }

      function fnCount(li) {
        var aBtn = li.getElementsByTagName('input');
        var oStrong = li.getElementsByTagName('strong')[0];
        var oEm = li.getElementsByTagName('em')[0];
        var oSpan = li.getElementsByTagName('span')[0];
        var num = Number(oStrong.innerHTML);
        var price = parseFloat(oEm.innerHTML);                                // 12.5

        aBtn[0].onclick = function () {
          num--;
          if (num < 0) {
            num = 0;
          }
          oStrong.innerHTML = num;
          oSpan.innerHTML = price * num + '元';

          // alert(this.index);

          fnSum();
        };
        aBtn[1].onclick = function () {
          num++;
          oStrong.innerHTML = num;
          oSpan.innerHTML = price * num + '元';

          // alert(this.index);

          fnSum();
        };

      }
    };
  </script>
</head>

<body>

  <ul id="list">
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" /> 单价：
      <em>12.5元</em> 小计：
      <span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" /> 单价：
      <em>10.5元</em> 小计：
      <span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" /> 单价：
      <em>8.5元</em> 小计：
      <span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" /> 单价：
      <em>8元</em> 小计：
      <span>0元</span>
    </li>
    <li>
      <input type="button" value="-" />
      <strong>0</strong>
      <input type="button" value="+" /> 单价：
      <em>14.5元</em> 小计：
      <span>0元</span>
    </li>
  </ul>

  <p id="p1">
    商品合计共：0件，共花费了：0元<br /> 其中最贵的商品单价是：0元
  </p>
</body>

</html>